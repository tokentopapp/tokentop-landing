---
const providers = [
  { 
    name: "Anthropic", 
    color: "#d4a27f", 
    icon: "M17.3041 3.541h-3.6718l6.696 16.918H24Zm-10.6082 0L0 20.459h3.7442l1.3693-3.5527h7.0052l1.3693 3.5528h3.7442L10.5363 3.5409Zm-.3712 10.2232 2.2914-5.9456 2.2914 5.9456Z" 
  },
  { 
    name: "OpenAI", 
    color: "#10a37f", 
    icon: "M22.2819 9.8211a5.9847 5.9847 0 0 0-.5157-4.9108 6.0462 6.0462 0 0 0-6.5098-2.9A6.0651 6.0651 0 0 0 4.9807 4.1818a5.9847 5.9847 0 0 0-3.9977 2.9 6.0462 6.0462 0 0 0 .7427 7.0966 5.98 5.98 0 0 0 .511 4.9107 6.051 6.051 0 0 0 6.5146 2.9001A5.9847 5.9847 0 0 0 13.2599 24a6.0557 6.0557 0 0 0 5.7718-4.2058 5.9894 5.9894 0 0 0 3.9977-2.9001 6.0557 6.0557 0 0 0-.7475-7.0729zm-9.022 12.6081a4.4755 4.4755 0 0 1-2.8764-1.0408l.1419-.0804 4.7783-2.7582a.7948.7948 0 0 0 .3927-.6813v-6.7369l2.02 1.1686a.071.071 0 0 1 .038.052v5.5826a4.504 4.504 0 0 1-4.4945 4.4944zm-9.6607-4.1254a4.4708 4.4708 0 0 1-.5346-3.0137l.142.0852 4.783 2.7582a.7712.7712 0 0 0 .7806 0l5.8428-3.3685v2.3324a.0804.0804 0 0 1-.0332.0615L9.74 19.9502a4.4992 4.4992 0 0 1-6.1408-1.6464zM2.3408 7.8956a4.485 4.485 0 0 1 2.3655-1.9728V11.6a.7664.7664 0 0 0 .3879.6765l5.8144 3.3543-2.0201 1.1685a.0757.0757 0 0 1-.071 0l-4.8303-2.7865A4.504 4.504 0 0 1 2.3408 7.872zm16.5963 3.8558L13.1038 8.364 15.1192 7.2a.0757.0757 0 0 1 .071 0l4.8303 2.7913a4.4944 4.4944 0 0 1-.6765 8.1042v-5.6772a.79.79 0 0 0-.407-.667zm2.0107-3.0231l-.142-.0852-4.7735-2.7818a.7759.7759 0 0 0-.7854 0L9.409 9.2297V6.8974a.0662.0662 0 0 1 .0284-.0615l4.8303-2.7866a4.4992 4.4992 0 0 1 6.6802 4.66zM8.3065 12.863l-2.02-1.1638a.0804.0804 0 0 1-.038-.0567V6.0742a4.4992 4.4992 0 0 1 7.3757-3.4537l-.142.0805L8.704 5.459a.7948.7948 0 0 0-.3927.6813zm1.0976-2.3654l2.602-1.4998 2.6069 1.4998v2.9994l-2.5974 1.4997-2.6067-1.4997Z" 
  },
  { 
    name: "Google Gemini", 
    color: "#4285f4", 
    icon: "M11.04 19.32Q12 21.51 12 24q0-2.49.93-4.68.96-2.19 2.58-3.81t3.81-2.55Q21.51 12 24 12q-2.49 0-4.68-.93a12.3 12.3 0 0 1-3.81-2.58 12.3 12.3 0 0 1-2.58-3.81Q12 2.49 12 0q0 2.49-.96 4.68-.93 2.19-2.55 3.81a12.3 12.3 0 0 1-3.81 2.58Q2.49 12 0 12q2.49 0 4.68.96 2.19.93 3.81 2.55t2.55 3.81" 
  },
  { 
    name: "GitHub Copilot", 
    color: "#6e40c9", 
    icon: "M23.922 16.997C23.061 18.492 18.063 22.02 12 22.02 5.937 22.02.939 18.492.078 16.997A.641.641 0 0 1 0 16.741v-2.869a.883.883 0 0 1 .053-.22c.372-.935 1.347-2.292 2.605-2.656.167-.429.414-1.055.644-1.517a10.098 10.098 0 0 1-.052-1.086c0-1.331.282-2.499 1.132-3.368.397-.406.89-.717 1.474-.952C7.255 2.937 9.248 1.98 11.978 1.98c2.731 0 4.767.957 6.166 2.093.584.235 1.077.546 1.474.952.85.869 1.132 2.037 1.132 3.368 0 .368-.014.733-.052 1.086.23.462.477 1.088.644 1.517 1.258.364 2.233 1.721 2.605 2.656a.841.841 0 0 1 .053.22v2.869a.641.641 0 0 1-.078.256Zm-11.75-5.992h-.344a4.359 4.359 0 0 1-.355.508c-.77.947-1.918 1.492-3.508 1.492-1.725 0-2.989-.359-3.782-1.259a2.137 2.137 0 0 1-.085-.104L4 11.746v6.585c1.435.779 4.514 2.179 8 2.179 3.486 0 6.565-1.4 8-2.179v-6.585l-.098-.104s-.033.045-.085.104c-.793.9-2.057 1.259-3.782 1.259-1.59 0-2.738-.545-3.508-1.492a4.359 4.359 0 0 1-.355-.508Zm2.328 3.25c.549 0 1 .451 1 1v2c0 .549-.451 1-1 1-.549 0-1-.451-1-1v-2c0-.549.451-1 1-1Zm-5 0c.549 0 1 .451 1 1v2c0 .549-.451 1-1 1-.549 0-1-.451-1-1v-2c0-.549.451-1 1-1Zm3.313-6.185c.136 1.057.403 1.913.878 2.497.442.544 1.134.938 2.344.938 1.573 0 2.292-.337 2.657-.751.384-.435.558-1.15.558-2.361 0-1.14-.243-1.847-.705-2.319-.477-.488-1.319-.862-2.824-1.025-1.487-.161-2.192.138-2.533.529-.269.307-.437.808-.438 1.578v.021c0 .265.021.562.063.893Zm-1.626 0c.042-.331.063-.628.063-.894v-.02c-.001-.77-.169-1.271-.438-1.578-.341-.391-1.046-.69-2.533-.529-1.505.163-2.347.537-2.824 1.025-.462.472-.705 1.179-.705 2.319 0 1.211.175 1.926.558 2.361.365.414 1.084.751 2.657.751 1.21 0 1.902-.394 2.344-.938.475-.584.742-1.44.878-2.497Z" 
  },
  { 
    name: "Codex", 
    color: "#10a37f", 
    icon: "M22.2819 9.8211a5.9847 5.9847 0 0 0-.5157-4.9108 6.0462 6.0462 0 0 0-6.5098-2.9A6.0651 6.0651 0 0 0 4.9807 4.1818a5.9847 5.9847 0 0 0-3.9977 2.9 6.0462 6.0462 0 0 0 .7427 7.0966 5.98 5.98 0 0 0 .511 4.9107 6.051 6.051 0 0 0 6.5146 2.9001A5.9847 5.9847 0 0 0 13.2599 24a6.0557 6.0557 0 0 0 5.7718-4.2058 5.9894 5.9894 0 0 0 3.9977-2.9001 6.0557 6.0557 0 0 0-.7475-7.0729zm-9.022 12.6081a4.4755 4.4755 0 0 1-2.8764-1.0408l.1419-.0804 4.7783-2.7582a.7948.7948 0 0 0 .3927-.6813v-6.7369l2.02 1.1686a.071.071 0 0 1 .038.052v5.5826a4.504 4.504 0 0 1-4.4945 4.4944zm-9.6607-4.1254a4.4708 4.4708 0 0 1-.5346-3.0137l.142.0852 4.783 2.7582a.7712.7712 0 0 0 .7806 0l5.8428-3.3685v2.3324a.0804.0804 0 0 1-.0332.0615L9.74 19.9502a4.4992 4.4992 0 0 1-6.1408-1.6464zM2.3408 7.8956a4.485 4.485 0 0 1 2.3655-1.9728V11.6a.7664.7664 0 0 0 .3879.6765l5.8144 3.3543-2.0201 1.1685a.0757.0757 0 0 1-.071 0l-4.8303-2.7865A4.504 4.504 0 0 1 2.3408 7.872zm16.5963 3.8558L13.1038 8.364 15.1192 7.2a.0757.0757 0 0 1 .071 0l4.8303 2.7913a4.4944 4.4944 0 0 1-.6765 8.1042v-5.6772a.79.79 0 0 0-.407-.667zm2.0107-3.0231l-.142-.0852-4.7735-2.7818a.7759.7759 0 0 0-.7854 0L9.409 9.2297V6.8974a.0662.0662 0 0 1 .0284-.0615l4.8303-2.7866a4.4992 4.4992 0 0 1 6.6802 4.66zM8.3065 12.863l-2.02-1.1638a.0804.0804 0 0 1-.038-.0567V6.0742a4.4992 4.4992 0 0 1 7.3757-3.4537l-.142.0805L8.704 5.459a.7948.7948 0 0 0-.3927.6813zm1.0976-2.3654l2.602-1.4998 2.6069 1.4998v2.9994l-2.5974 1.4997-2.6067-1.4997Z"
  },
  { 
    name: "Perplexity", 
    color: "#20b2aa", 
    icon: "M22.3977 7.0896h-2.3106V.0676l-7.5094 6.3542V.1577h-1.1554v6.1966L4.4904 0v7.0896H1.6023v10.3976h2.8882V24l6.932-6.3591v6.2005h1.1554v-6.0469l6.9318 6.1807v-6.4879h2.8882V7.0896zm-3.4657-4.531v4.531h-5.355l5.355-4.531zm-13.2862.0676 4.8691 4.4634H5.6458V2.6262zM2.7576 16.332V8.245h7.8476l-6.1149 6.1147v1.9723H2.7576zm2.8882 5.0404v-3.8852h.0001v-2.6488l5.7763-5.7764v7.0111l-5.7764 5.2993zm12.7086.0248-5.7766-5.1509V9.0618l5.7766 5.7766v6.5588zm2.8882-5.0652h-1.733v-1.9723L13.3948 8.245h7.8478v8.087z" 
  },
  { 
    name: "Antigravity", 
    color: "#4285f4", 
    icon: "M9.16861 16.0529L17.2018 9.85156C17.5957 9.54755 18.1586 9.66612 18.3463 10.1384C19.3339 12.6288 18.8926 15.6217 16.9276 17.6766C14.9626 19.7314 12.2285 20.1821 9.72948 19.1557L6.9995 20.4775C10.9151 23.2763 15.6699 22.5841 18.6411 19.4749C20.9979 17.0103 21.7278 13.6508 21.0453 10.6214L21.0515 10.6278C20.0617 6.17736 21.2948 4.39847 23.8207 0.760904C23.8804 0.674655 23.9402 0.588405 24 0.5L20.6762 3.97585V3.96506L9.16658 16.0551M7.37742 16.7017C4.67579 14.0395 5.14158 9.91963 7.44676 7.54383C9.15135 5.78544 11.9442 5.06779 14.3821 6.12281L17.0005 4.87559C16.5288 4.52392 15.9242 4.14566 15.2305 3.87986C12.0948 2.54882 8.34069 3.21127 5.79171 5.8386C3.33985 8.36779 2.56881 12.2567 3.89286 15.5751C4.88192 18.0552 3.26056 19.8094 1.62731 21.5801C1.04853 22.2078 0.467774 22.8355 0 23.5L7.3754 16.7037" 
  },
  { 
    name: "MiniMax", 
    color: "#6366f1", 
    icon: "M16.278 2c1.156 0 2.093.927 2.093 2.07v12.501a.74.74 0 00.744.709.74.74 0 00.743-.709V9.099a2.06 2.06 0 012.071-2.049A2.06 2.06 0 0124 9.1v6.561a.649.649 0 01-.652.645.649.649 0 01-.653-.645V9.1a.762.762 0 00-.766-.758.762.762 0 00-.766.758v7.472a2.037 2.037 0 01-2.048 2.026 2.037 2.037 0 01-2.048-2.026v-12.5a.785.785 0 00-.788-.753.785.785 0 00-.789.752l-.001 15.904A2.037 2.037 0 0113.441 22a2.037 2.037 0 01-2.048-2.026V18.04c0-.356.292-.645.652-.645.36 0 .652.289.652.645v1.934c0 .263.142.506.372.638.23.131.514.131.744 0a.734.734 0 00.372-.638V4.07c0-1.143.937-2.07 2.093-2.07zm-5.674 0c1.156 0 2.093.927 2.093 2.07v11.523a.648.648 0 01-.652.645.648.648 0 01-.652-.645V4.07a.785.785 0 00-.789-.78.785.785 0 00-.789.78v14.013a2.06 2.06 0 01-2.07 2.048 2.06 2.06 0 01-2.071-2.048V9.1a.762.762 0 00-.766-.758.762.762 0 00-.766.758v3.8a2.06 2.06 0 01-2.071 2.049A2.06 2.06 0 010 12.9v-1.378c0-.357.292-.646.652-.646.36 0 .653.29.653.646V12.9c0 .418.343.757.766.757s.766-.339.766-.757V9.099a2.06 2.06 0 012.07-2.048 2.06 2.06 0 012.071 2.048v8.984c0 .419.343.758.767.758.423 0 .766-.339.766-.758V4.07c0-1.143.937-2.07 2.093-2.07z" 
  },
  { 
    name: "Zai", 
    color: "#10b981", 
    icon: "M12.105 2L9.927 4.953H.653L2.83 2h9.276zM23.254 19.048L21.078 22h-9.242l2.174-2.952h9.244zM24 2L9.264 22H0L14.736 2H24z" 
  },
  { 
    name: "OpenCode Zen", 
    color: "#6366f1", 
    icon: "M18 6H6V24H18V6ZM24 30H0V0H24V30Z",
    viewBox: "0 0 24 30" 
  }
];

const agents = [
  { 
    name: "OpenCode", 
    color: "#6366f1", 
    icon: "M18 6H6V24H18V6ZM24 30H0V0H24V30Z",
    viewBox: "0 0 24 30" 
  },
  { 
    name: "Claude Code", 
    color: "#d4a27f", 
    icon: "M17.3041 3.541h-3.6718l6.696 16.918H24Zm-10.6082 0L0 20.459h3.7442l1.3693-3.5527h7.0052l1.3693 3.5528h3.7442L10.5363 3.5409Zm-.3712 10.2232 2.2914-5.9456 2.2914 5.9456Z"
  },
  { 
    name: "Cursor", 
    color: "#00A3FF", 
    wip: true,
    icon: "M11.503.131 1.891 5.678a.84.84 0 0 0-.42.726v11.188c0 .3.162.575.42.724l9.609 5.55a1 1 0 0 0 .998 0l9.61-5.55a.84.84 0 0 0 .42-.724V6.404a.84.84 0 0 0-.42-.726L12.497.131a1.01 1.01 0 0 0-.996 0M2.657 6.338h18.55c.263 0 .43.287.297.515L12.23 22.918c-.062.107-.229.064-.229-.06V12.335a.59.59 0 0 0-.295-.51l-9.11-5.257c-.109-.063-.064-.23.061-.23"
  },
  { 
    name: "Windsurf", 
    color: "#09B6A2", 
    wip: true,
    icon: "M23.55 5.067c-1.2038-.002-2.1806.973-2.1806 2.1765v4.8676c0 .972-.8035 1.7594-1.7597 1.7594-.568 0-1.1352-.286-1.4718-.7659l-4.9713-7.1003c-.4125-.5896-1.0837-.941-1.8103-.941-1.1334 0-2.1533.9635-2.1533 2.153v4.8957c0 .972-.7969 1.7594-1.7596 1.7594-.57 0-1.1363-.286-1.4728-.7658L.4076 5.1598C.2822 4.9798 0 5.0688 0 5.2882v4.2452c0 .2147.0656.4228.1884.599l5.4748 7.8183c.3234.462.8006.8052 1.3509.9298 1.3771.313 2.6446-.747 2.6446-2.0977v-4.893c0-.972.7875-1.7593 1.7596-1.7593h.003a1.798 1.798 0 0 1 1.4718.7658l4.9723 7.0994c.4135.5905 1.05.941 1.8093.941 1.1587 0 2.1515-.9645 2.1515-2.153v-4.8948c0-.972.7875-1.7594 1.7596-1.7594h.194a.22.22 0 0 0 .2204-.2202v-4.622a.22.22 0 0 0-.2203-.2203Z"
  },
  { 
    name: "Gemini CLI", 
    color: "#4285f4", 
    wip: true,
    icon: "M11.04 19.32Q12 21.51 12 24q0-2.49.93-4.68.96-2.19 2.58-3.81t3.81-2.55Q21.51 12 24 12q-2.49 0-4.68-.93a12.3 12.3 0 0 1-3.81-2.58 12.3 12.3 0 0 1-2.58-3.81Q12 2.49 12 0q0 2.49-.96 4.68-.93 2.19-2.55 3.81a12.3 12.3 0 0 1-3.81 2.58Q2.49 12 0 12q2.49 0 4.68.96 2.19.93 3.81 2.55t2.55 3.81"
  },
  { 
    name: "Antigravity", 
    color: "#4285f4", 
    wip: true,
    icon: "M9.16861 16.0529L17.2018 9.85156C17.5957 9.54755 18.1586 9.66612 18.3463 10.1384C19.3339 12.6288 18.8926 15.6217 16.9276 17.6766C14.9626 19.7314 12.2285 20.1821 9.72948 19.1557L6.9995 20.4775C10.9151 23.2763 15.6699 22.5841 18.6411 19.4749C20.9979 17.0103 21.7278 13.6508 21.0453 10.6214L21.0515 10.6278C20.0617 6.17736 21.2948 4.39847 23.8207 0.760904C23.8804 0.674655 23.9402 0.588405 24 0.5L20.6762 3.97585V3.96506L9.16658 16.0551M7.37742 16.7017C4.67579 14.0395 5.14158 9.91963 7.44676 7.54383C9.15135 5.78544 11.9442 5.06779 14.3821 6.12281L17.0005 4.87559C16.5288 4.52392 15.9242 4.14566 15.2305 3.87986C12.0948 2.54882 8.34069 3.21127 5.79171 5.8386C3.33985 8.36779 2.56881 12.2567 3.89286 15.5751C4.88192 18.0552 3.26056 19.8094 1.62731 21.5801C1.04853 22.2078 0.467774 22.8355 0 23.5L7.3754 16.7037" 
  }
];

const plugins = [
  // PROVIDERS (built-in â€” no standalone repos)
  { name: "provider-anthropic", type: "Provider", desc: "Anthropic Claude subscription usage tracking via OAuth.", official: true },
  { name: "provider-openai-api", type: "Provider", desc: "OpenAI API usage tracking via OAuth. Supports GPT-4.1, o3, and all current models.", official: true },
  { name: "provider-gemini", type: "Provider", desc: "Gemini CLI usage tracking via Google OAuth.", official: true },
  { name: "provider-github-copilot", type: "Provider", desc: "GitHub Copilot usage tracking including premium requests.", official: true },
  { name: "provider-codex", type: "Provider", desc: "OpenAI Codex subscription usage tracking via OAuth.", official: true },
  { name: "provider-perplexity", type: "Provider", desc: "Perplexity AI API usage tracking (credit-based).", official: true },
  { name: "provider-antigravity", type: "Provider", desc: "Antigravity (Google Gemini Advanced) subscription usage tracking.", official: true },
  { name: "provider-minimax", type: "Provider", desc: "MiniMax usage and quota tracking.", official: true },
  { name: "provider-opencode-zen", type: "Provider", desc: "OpenCode Zen â€” curated AI models for coding agents.", official: true },
  { name: "provider-zai", type: "Provider", desc: "Z.ai coding plan usage and quota tracking.", official: true },

  // AGENTS (external repos in tokentopapp org â€” versions fetched dynamically)
  { name: "agent-opencode", type: "Agent", desc: "OpenCode session parsing, credential discovery, and real-time cost tracking.", official: true, repo: "tokentopapp/agent-opencode" },
  { name: "agent-claude-code", type: "Agent", desc: "Claude Code session parsing, credential discovery, and real-time cost tracking.", official: true, repo: "tokentopapp/agent-claude-code" },
  { name: "agent-cursor", type: "Agent", desc: "Cursor session parsing, credential discovery, and real-time cost tracking.", official: true, repo: "tokentopapp/agent-cursor", meta: "ðŸš§" },
  { name: "agent-windsurf", type: "Agent", desc: "Windsurf (Codeium) session parsing, credential discovery, and cost tracking.", official: true, repo: "tokentopapp/agent-windsurf", meta: "ðŸš§" },
  { name: "agent-gemini-cli", type: "Agent", desc: "Gemini CLI session parsing, credential discovery, and real-time cost tracking.", official: true, repo: "tokentopapp/agent-gemini-cli", meta: "ðŸš§" },
  { name: "agent-antigravity", type: "Agent", desc: "Antigravity session parsing, credential discovery, and real-time cost tracking.", official: true, repo: "tokentopapp/agent-antigravity", meta: "ðŸš§" },

  // THEMES (built-in â€” no standalone repos)
  { name: "theme-tokyo-night", type: "Theme", desc: "Tokyo Night color scheme. Dark, vibrant blues and purples.", official: true },
  { name: "theme-opencode", type: "Theme", desc: "OpenCode color scheme. Dark with teal and gold accents.", official: true },
  { name: "theme-claude-code", type: "Theme", desc: "Claude Code color scheme. Anthropic-inspired dark theme.", official: true },
  { name: "theme-dracula", type: "Theme", desc: "Dracula color scheme. Classic dark theme with vivid colors.", official: true },
  { name: "theme-nord", type: "Theme", desc: "Nord color scheme. Arctic, north-bluish palette.", official: true },
  { name: "theme-one-dark", type: "Theme", desc: "One Dark color scheme. Inspired by Atom's iconic theme.", official: true },
  { name: "theme-rose-pine", type: "Theme", desc: "RosÃ© Pine color scheme. Soho vibes for dark mode.", official: true },
  { name: "theme-rose-pine-dawn", type: "Theme", desc: "RosÃ© Pine Dawn. Light variant of RosÃ© Pine.", official: true },
  { name: "theme-catppuccin-mocha", type: "Theme", desc: "Catppuccin Mocha. Soothing warm dark pastel theme.", official: true },
  { name: "theme-catppuccin-latte", type: "Theme", desc: "Catppuccin Latte. Light pastel theme.", official: true },
  { name: "theme-kanagawa", type: "Theme", desc: "Kanagawa color scheme. Inspired by Katsushika Hokusai's The Great Wave.", official: true },
  { name: "theme-gruvbox-dark", type: "Theme", desc: "Gruvbox Dark. Retro groove color scheme.", official: true },
  { name: "theme-gruvbox-light", type: "Theme", desc: "Gruvbox Light. Retro groove, light variant.", official: true },
  { name: "theme-github-light", type: "Theme", desc: "GitHub Light. Clean and familiar light theme.", official: true },
  { name: "theme-solarized-light", type: "Theme", desc: "Solarized Light. Precision colors for readability.", official: true },

  // NOTIFICATIONS (built-in â€” no standalone repos)
  { name: "notification-terminal-bell", type: "Notification", desc: "Simple terminal bell (BEL character) for budget alerts.", official: true },
  { name: "notification-visual-flash", type: "Notification", desc: "Visual screen flash using ANSI escape sequences for alerts.", official: true },
];
---

<section id="providers" class="py-24 bg-[var(--color-bg-page)] relative overflow-hidden">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
    <h2 class="text-3xl md:text-5xl font-bold tracking-tight mb-16 reveal">
      Works with your stack
    </h2>

    <!-- Providers -->
    <div class="mb-16 reveal">
      <h3 class="text-sm font-semibold text-[var(--color-text-muted)] uppercase tracking-wider mb-8">
        Supported Providers
      </h3>
      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4 max-w-5xl mx-auto">
        {providers.map((item) => (
          <div 
            class="group flex flex-col items-center justify-center p-6 rounded-xl bg-[var(--color-bg-card)] border border-[var(--color-border)] hover:border-[var(--color-border-muted)] transition-all duration-300 hover:-translate-y-1 relative overflow-hidden"
            style={`--hover-color: ${item.color}`}
          >
            <!-- Hover Glow Background -->
            <div class="absolute inset-0 bg-[var(--hover-color)] opacity-0 group-hover:opacity-5 transition-opacity duration-300"></div>
            
            <!-- Icon / Fallback -->
            <div class="mb-3 transition-transform duration-300 group-hover:scale-110 relative z-10">
              {item.icon ? (
                <svg 
                  viewBox={item.viewBox || "0 0 24 24"} 
                  class="w-8 h-8 fill-current text-[var(--color-text-muted)] group-hover:text-[var(--hover-color)] transition-colors duration-300"
                >
                  <path d={item.icon} />
                </svg>
              ) : (
                <div 
                  class="w-8 h-8 rounded-full flex items-center justify-center bg-[var(--color-bg-page)] border border-[var(--color-border)] text-[var(--color-text-muted)] font-bold text-xs group-hover:text-[var(--hover-color)] group-hover:border-[var(--hover-color)] transition-all duration-300"
                >
                  {item.fallback}
                </div>
              )}
            </div>
            
            <!-- Name -->
            <span class="text-sm font-medium text-[var(--color-text-primary)] group-hover:text-white transition-colors duration-300 relative z-10">
              {item.name}
            </span>
            
            <!-- Bottom Line Accent -->
            <div class="absolute bottom-0 left-0 w-full h-0.5 bg-[var(--hover-color)] scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"></div>
          </div>
        ))}
      </div>
    </div>

    <!-- Agents -->
    <div class="reveal">
      <h3 class="text-sm font-semibold text-[var(--color-text-muted)] uppercase tracking-wider mb-8">
        Supported Agents & CLIs
      </h3>
      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-4 max-w-6xl mx-auto">
        {agents.map((item) => (
          <div 
            class="group flex flex-col items-center justify-center p-6 rounded-xl bg-[var(--color-bg-card)] border border-[var(--color-border)] hover:border-[var(--color-border-muted)] transition-all duration-300 hover:-translate-y-1 relative overflow-hidden"
            style={`--hover-color: ${item.color}`}
          >
            <!-- Hover Glow Background -->
            <div class="absolute inset-0 bg-[var(--hover-color)] opacity-0 group-hover:opacity-5 transition-opacity duration-300"></div>
            
            <!-- Icon / Fallback -->
            <div class="mb-3 transition-transform duration-300 group-hover:scale-110 relative z-10">
              {item.icon ? (
                <svg 
                  viewBox={item.viewBox || "0 0 24 24"} 
                  class="w-8 h-8 fill-current text-[var(--color-text-muted)] group-hover:text-[var(--hover-color)] transition-colors duration-300"
                >
                  <path d={item.icon} />
                </svg>
              ) : (
                <div 
                  class="w-8 h-8 rounded-full flex items-center justify-center bg-[var(--color-bg-page)] border border-[var(--color-border)] text-[var(--color-text-muted)] font-bold text-xs group-hover:text-[var(--hover-color)] group-hover:border-[var(--hover-color)] transition-all duration-300"
                >
                  {item.fallback}
                </div>
              )}
            </div>
            
            <!-- Name -->
            <span class="text-sm font-medium text-[var(--color-text-primary)] group-hover:text-white transition-colors duration-300 relative z-10">
              {item.name}
            </span>
            
            <!-- Bottom Line Accent -->
            <div class="absolute bottom-0 left-0 w-full h-0.5 bg-[var(--hover-color)] scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"></div>
            
            {item.wip && (
              <span class="absolute bottom-1.5 right-1.5 text-[9px] font-semibold uppercase tracking-wider text-[var(--color-text-muted)] opacity-40 z-10">
                wip
              </span>
            )}
          </div>
        ))}
      </div>
    </div>

    <!-- Plugin Registry -->
    <div class="mt-24 reveal plugin-registry-container">
      <div class="mb-10 text-center">
        <h3 class="text-2xl md:text-3xl font-bold tracking-tight mb-3">
          Plugin Registry
        </h3>
        <p class="text-[var(--color-text-muted)] text-sm max-w-2xl mx-auto">
          {plugins.length} built-in plugins ready to use. 
        </p>
      </div>

      <!-- Filter Tabs -->
      <div class="flex flex-wrap justify-center gap-2 mb-12" id="plugin-filters">
        <button 
          class="px-4 py-1.5 rounded-full text-xs font-medium border transition-all duration-300 active-filter"
          data-filter="all"
          style="border-color: var(--color-primary); color: var(--color-text-primary); background: rgba(122, 162, 247, 0.1);"
        >
          All
        </button>
        {([
          { key: "Provider", label: "Providers" },
          { key: "Agent", label: "Agents" },
          { key: "Theme", label: "Themes" },
          { key: "Notification", label: "Notifications" },

        ] as const).map((filter) => (
          <button 
            class="px-4 py-1.5 rounded-full text-xs font-medium border border-[var(--color-border)] text-[var(--color-text-muted)] hover:border-[var(--color-text-muted)] hover:text-[var(--color-text-primary)] transition-all duration-300"
            data-filter={filter.key}
          >
            {filter.label}
          </button>
        ))}
      </div>

      <!-- Plugin Grid -->
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 max-w-6xl mx-auto text-left relative" id="plugin-grid">
        {plugins.map((plugin) => {
          const isTheme = plugin.type === 'Theme';
          
          return (
            <div 
              class={`plugin-card group flex flex-col rounded-xl border transition-all duration-300 hover:-translate-y-1 relative overflow-hidden bg-[var(--color-bg-card)]
                ${isTheme 
                  ? 'p-4 border-[var(--color-border)] hover:border-[var(--color-border-muted)] h-auto' 
                  : 'p-5 border-[var(--color-border)] hover:border-[var(--color-border-muted)] h-full'
                }
              `}
              data-category={plugin.type}
            >

              {/* Theme Compact Layout */}
              {isTheme && (
                <div class="flex items-center gap-3">
                  <div class="w-8 h-8 rounded-lg flex-shrink-0 bg-gradient-to-br from-[var(--color-bg-page)] to-[var(--color-bg-card)] border border-[var(--color-border)] flex items-center justify-center">
                     <div class="w-3 h-3 rounded-full" style={`background-color: ${
                        plugin.name.includes('tokyo') ? '#7aa2f7' :
                        plugin.name.includes('opencode') ? '#09B6A2' :
                        plugin.name.includes('claude') ? '#d4a27f' :
                        plugin.name.includes('dracula') ? '#ff79c6' :
                        plugin.name.includes('nord') ? '#88c0d0' :
                        plugin.name.includes('one-dark') ? '#e06c75' :
                        plugin.name.includes('rose') ? '#ebbcba' :
                        plugin.name.includes('catppuccin') ? '#f5c2e7' :
                        plugin.name.includes('kanagawa') ? '#dca561' :
                        plugin.name.includes('gruvbox') ? '#fabd2f' :
                        plugin.name.includes('solarized') ? '#b58900' :
                        plugin.name.includes('github') ? '#24292e' :
                        'var(--color-text-muted)'
                     }`}></div>
                  </div>
                  <span class="font-mono text-xs font-bold text-[var(--color-text-primary)] truncate block leading-tight">
                    {plugin.name.replace('theme-', '')}
                  </span>
                  <span class="ml-auto text-[10px] text-[var(--color-text-subtle)] opacity-60">Built-in</span>
                </div>
              )}

              {/* Standard Layout (Providers, Agents, Notifications) */}
              {!isTheme && (
                <>
                  <div class="flex items-start justify-between mb-3 gap-3">
                    <span class="font-mono text-sm font-semibold text-[var(--color-text-primary)] break-all leading-tight group-hover:text-[var(--color-primary)] transition-colors">
                      {plugin.name}
                    </span>
                    {plugin.official && (
                      <span class="flex-shrink-0 px-1.5 py-0.5 rounded-full text-[9px] uppercase font-bold tracking-wider border border-[var(--color-primary)]/30 text-[var(--color-primary)] bg-[var(--color-primary)]/5">
                        Official
                      </span>
                    )}
                  </div>

                  <p class="text-xs text-[var(--color-text-muted)] mb-4 leading-relaxed flex-grow line-clamp-2">
                    {plugin.desc}
                  </p>

                  <div class="flex items-center justify-between text-[10px] font-mono text-[var(--color-text-subtle)] mt-auto pt-3 border-t border-[var(--color-border)] border-dashed">
                    <div class="flex items-center gap-2">
                      <span class={`px-1.5 py-0.5 rounded border ${
                        plugin.type === 'Provider' ? 'border-emerald-500/20 text-emerald-400 bg-emerald-500/5' : 
                        plugin.type === 'Agent' ? 'border-amber-500/20 text-amber-400 bg-amber-500/5' : 
                        'border-[var(--color-border)]'
                      }`}>
                        {plugin.type}
                      </span>
                      {plugin.meta && <span class="text-[var(--color-text-muted)]">{plugin.meta}</span>}
                    </div>
                    {plugin.repo ? (
                      <div class="flex items-center gap-2">
                        <span class="opacity-60 plugin-version" data-repo={plugin.repo}>...</span>
                        <a href={`https://github.com/${plugin.repo}`} target="_blank" rel="noopener noreferrer" class="text-[var(--color-text-subtle)] hover:text-[var(--color-primary)] transition-colors cursor-pointer" aria-label={`${plugin.name} on GitHub`}>
                          <svg class="w-3.5 h-3.5" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/></svg>
                        </a>
                      </div>
                    ) : (
                      <span class="opacity-60">Built-in</span>
                    )}
                  </div>
                </>
              )}
            </div>
          );
        })}
      </div>

      <!-- Plugin SDK â€” standalone below grid -->
      <div class="mt-8 max-w-6xl mx-auto">
        <div class="group flex flex-col rounded-xl border p-6 border-[var(--color-primary)]/30 bg-[var(--color-primary)]/5 hover:bg-[var(--color-primary)]/10 hover:shadow-[0_0_20px_rgba(122,162,247,0.1)] transition-all duration-300 relative overflow-hidden">
          <div class="flex flex-col md:flex-row items-center justify-between w-full gap-6">
            <div class="text-left">
              <h4 class="text-lg font-bold text-[var(--color-text-primary)] mb-1 flex items-center gap-2">
                <svg class="w-5 h-5 text-[var(--color-primary)]" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
                </svg>
                plugin-sdk
                <span class="text-xs font-normal text-[var(--color-text-muted)] plugin-version" data-repo="tokentopapp/plugin-sdk"></span>
              </h4>
              <p class="text-[var(--color-text-muted)] text-sm">SDK for building tokentop plugins â€” type definitions, helpers, and test harness.</p>
            </div>
            <a href="https://github.com/tokentopapp/plugin-sdk" class="flex-shrink-0 px-5 py-2.5 rounded-lg bg-[var(--color-primary)] text-[var(--color-bg-page)] font-bold text-sm hover:opacity-90 transition-opacity flex items-center gap-2">
              Build a Plugin
              <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
              </svg>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Fetch plugin versions from GitHub releases API
  document.querySelectorAll('.plugin-version[data-repo]').forEach(el => {
    const repo = el.getAttribute('data-repo');
    if (!repo) return;
    fetch(`https://api.github.com/repos/${repo}/releases/latest`)
      .then(r => r.ok ? r.json() : null)
      .then(data => {
        if (data?.tag_name) {
          el.textContent = data.tag_name;
        } else {
          el.textContent = '';
        }
      })
      .catch(() => { el.textContent = ''; });
  });

  // Simple vanilla JS for tab filtering
  document.addEventListener('DOMContentLoaded', () => {
    const filters = document.getElementById('plugin-filters');
    if (!filters) return;
    
    // Add event delegation or direct listeners
    const buttons = filters.querySelectorAll('button');
    const cards = document.querySelectorAll('.plugin-card');

    buttons.forEach(btn => {
      btn.addEventListener('click', () => {
        // Reset all buttons
        buttons.forEach(b => {
          b.classList.remove('active-filter');
          // Reset inline styles that might have been set
          b.style.borderColor = 'var(--color-border)';
          b.style.color = 'var(--color-text-muted)';
          b.style.background = 'transparent';
        });
        
        // Activate clicked button
        btn.classList.add('active-filter');
        btn.style.borderColor = 'var(--color-primary)';
        btn.style.color = 'var(--color-text-primary)';
        btn.style.background = 'rgba(122, 162, 247, 0.1)';

        // Filter cards
        const filterValue = btn.getAttribute('data-filter');
        
        cards.forEach(card => {
          const cardEl = card as HTMLElement; 
          const cardCategory = cardEl.getAttribute('data-category');
          
          if (filterValue === 'all' || cardCategory === filterValue) {
            cardEl.style.display = 'flex';
            
            // Layout adjustments for different filtered states
            if (filterValue === 'Theme' && cardCategory === 'Theme') {
               // When showing only themes, we can keep the grid as is or dense it up
               // The grid classes on parent handle responsive columns
            }

            // Trigger animation
            cardEl.style.opacity = '0';
            cardEl.style.transform = 'translateY(10px)';
            requestAnimationFrame(() => {
              cardEl.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
              cardEl.style.opacity = '1';
              cardEl.style.transform = 'translateY(0)';
            });
          } else {
            cardEl.style.display = 'none';
          }
        });
      });
    });
  });
</script>
